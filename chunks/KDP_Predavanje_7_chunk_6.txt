 OK, reader.light. Objim pravo da čitam šta ja treba doodradimo ovte. Pa nema pojma, ja znam da treba doodradim cnr t r plus plus. Da uvećem broj čitalaca koji trebno čitaju. A, da li treba nekog buditi? Nemam pojma, to zavisi od toga kako je nemenje neko probudio. Verotno ćemo imati sličnu parče koda i gore za start right. A dok le neku čeka dok le god je count w već je od nule ili count r već je od nule. Znači dok le god bilo ko ili čita ili piše, mi moramo da čekamo. A OK tu za writeravate i count w plus plus. Ovo za sada znam da treba doodradi. Da li treba još nešto? Nemam pojma. To će zavisitio od toga kako budemo napisali ove naše metode end. Šta radi piset kad završi sa pisanjem? Znamo da će odraditi cnr t w minus minus. Šta još? Ne znamo. Šta zna radi čitala, tka završi sa čitanjem, a cnr t r minus minus. To znam. Ostatak više ništa ne znamo. Ovo da je našem kod u koji treba da napisamo. OK znamo da imamo ove naše kondišene. OK r i OK write. Koga čitalac može proboditi? I kada tog nekog može proboditi? Ja bi ove mogu da napisem sada OK writer.signala. Ovde mi verovatno radilo. Samo ovo nije ispravno ovako pisati. Sa nekomog što nije ispravno. Šta fali ovo ovde? A sa stanuvišta, da li će ovde ovde raditi? Šta će se desti? Mi kada kažem OK to write.signala, taj neko se probudi. I taj writer, ako je broj čitalaca jednak nul i već o nule ili broj pisaca već o nule će se zablokirati ponovom. Tako da nema svrha je nekog buditi, ako broj čitalaca nije pao na nulu. Jer šta se desi? Mi probodimo nekog taj se probodi, krenem da radi kažem u nema za mene i moram ponova se zablokirati. Potrošili smo silno vreme na to, a nema nikakvog pozitivnog efekta na napredovanje izvršavanja naših programa. Bog toga je bolje da stavite ovde if. Ima je što je razlog, zašto nevali ovako da kažete signal. Ako bi smo imali svema u službu promenjivu koja je najpoštenija moguća, koja radi FIFO, ako mi nekog probudimo. I taj neko kaže, u nije za mene i ponov se vrati da bude blokiran. Gde je taj neko otišao? Taj neko je sad otišao na kraj reda. Znači to što je uslovno promenjiva FIFO. Če lepo raditi, samo ako se neko jednom probudi sa te promenjive. Ako se neko probudi, konstatujemo, u nije za mene i blokiran se ponov o taj više nije FIFO. Taj je sad otišao na kraj reda. Potpunno smo izgubili redosnet. To nije dobro. Kada se izgubi redosnet. Dobro, hajde sad da vidimo, što smo rekti. F, cnr r, jednako-jednako nula, tad možemo da budimo ovog našenga, ko piš. Da vidimo kako će izgledati kod zem right. Tu nema šta da provjeramo. OK, tu... Count double v e sigurno, jednako nuli. Bilo, nije moglo da bude više od 1, ako nije moglo da bude više od 1, a kada smo manjili za 1, postalo je nula. Jer je preto da je bilo nula kada je započeo pisanje. Dobro. Pa je onda ja budim sad čitom celipist. Ili ja ovde treba sada kažem OKR, tačka, signal ili OKV. Odgore je pojmanja. Ne znam ko mi je došao prefi. Dobro, i šta onda radim? Ja mogu samo ja ovako dostim OKR Reader i OKV Writer. Mogu. Ko će doći prvi na red? Čitom celipist? Pojman nemam. Ko do laku u grešenja? A, mi sada nismo dali prednost ni čitom celipistima. Ja sam ovde mogu da stajem malo drugačije parče koda. A, OKR, tačka, u e, u e. Dalima nekog zablakiramo g? Pa ako ima budi, i ovde sam to išto mogu da odradim, samo sa dublve, a kažem, ako postoji nekog, a ti probudi. A, dali će ovo da napravio neki problem čitom celipistima? Pa potencijalnom problem će nastati. Tako što ćemo probuditi nekog, a, taj neko, ako treba da se probudi, super. A, ako ne treba da se probudi, reći će, a što ste mi budili, sad ćeš da izgubim FIFA Redosled. Pa, kuda imamo mali problem, ako treba garantovati FIFA Redosled, a, nad dva reda je to malo teže napraviti. Nije ne moguće, moguće je napraviti, ako imamo dva odvojena reda, OK to read i OK to write, ali nije tako jednostav. A što onda? Kako sad da mišim ilo ovo valja prvo? Ako, o, nije pitanje, dali ovo ovde ispravno radi, ovo za sada ne radi ispravno, a zašto ne radi ispravno, kada i pisac završio? Koliko je on, znači, sad ćemo da gledamo sledjacu situaciju, znači zamislite, da je došao jedan pisac i krenu da piš. I dođe jedan čitalat koji ođeđe da čeka, dođe drugi čitalat koji ođeđe da čeka, dođe treći čitalat, ci su oni zablokirani? Ovo je naš pisac. Koliko je čitalaca probudio kada je reko OK, a reader.signal? Probudio je jednog. Aha, to znači da kada dođe jednom pisac, nakon toga su ovi si realizovanih ili čak nastane deadlock. Kako nastane deadlock? Pa vrlo jednostavno nastane deadlock, a endlock da čta smo rekli? Dođe pisac pozove metodu start write i krenu da piš. Dođe čitalac, pozove start read dođe čitalac, pozove start read dosta imam u dva čitalac, a ne treba na više. Pisac kaže, ja završio. Ielima neko koji je zablokiran? Ima, probudi prvog. Probudim ja prvog čitalca, šta se redi da desi s tim prvim čitocom? Taj prvi čitalac je probudit, kaže super, ja smem čitam i odde da čita i završi taj čitalac. Čitanje pozove end read i kaže, ili ima neki pisac koji čeka, ne ima neku kraj? Šta se desilo s drugim čitalacem? Hosto zablokiram za vijek i vijekov. Mislim, nije za vijek i vijekov, za blokiran je samo od oksine pojavi neki pisac. Znači, jako postoji nešto što je napisan? Što taj čitalac može da čita? Ne, taj čitalac ostal zablokiran. Tako da ovo rešenje, ovako napisan, nevalja, ima deadlock. Da bog toga, ćemo morati ovako na nešto da prebacimo naš kot. Kada imamo start read da kažemo ako postoji još neki čitalac koji zablokiran, a ti ga probuti. I na ovaj način smo mi malo odklonili problem koje postoja u našem kodu. Mislim, ovde uzeli da budimo veći broj čitalac, veći broj pisac, odko se da je broj pisac, odnosno barem jednog čitalca barem jednog pisac koja postoja, pa oni nek se među sobno takviče. Ako ima čitalac, ako ima pisac, oba pređu n3q pa nek se biju tamo koji će prvi doći na red. Zato što nevoš to ne znači da će možda ti koja smo sad probodili doći na red, nego će možda doći neko koj trenutno čeka u n3q. Šta sam sad rekao? Neko ko sada čeka u n3q. Aha, dobro, znači, sad tu treba vodi treću nakon se nekod od vas u zadatku traži garantova ti fifo red osled. A mi imamo fifo ulozno promenivu. Šta sam ja rekao? Imo fifo nad usnovnom promenivom, a kad odradimo signala i al čekamo na usnovnoj promenivi, joko čekamo na n3q, na uloznom redu. Dosu dve potpunu odvojene stvari. A kad doće neko nov, da se neko je neko i da ispita, ili ma neko za blokirana usnovnoj promeniv, šta će dobiti? Nemam nikog, ja ću dođem. Pa smo napravili fifo, pa nismo. Zato što je, možda, taj koji je kasnije došao preušao ovaj ovdje, naš monitor samo zato što nije bilo nikog u q koji bi om proverio, ili postoji neko, pošto ne postoji.