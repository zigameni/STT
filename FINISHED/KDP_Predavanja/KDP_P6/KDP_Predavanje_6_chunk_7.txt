 Aha, dobro. I mi smo sad da ispričali, koliko imamo retova. Imamo entry queue, imamo za svaku uslovnu promenjivu po jedan queue, po jedan red čekanja i imamo jedan još dodati queue ako imamo disciplinu urgent weight, ako imamo signal and weight običan ili disciplinu signal and continu, u obšte ne imamo taj urgentni red. I sad je pitanje šta je starije kokoške li jaj? Ja su stariji monitori i ja su stariji semafori. A ako su stariji semafori, hajde da napravo monitor koristići semafor, odnosno neću mi dopravo monitor nego ćemo mi da damo šablon, koji treba da koristi programski prevodilac svaki pud kada treba da napravi monitor. Znači šta programski prevodilac treba da odradi da bi mogao da kreira jedan monitor? Dobro, treba da napišemo... Odgovarajući broj tih zamena. Iskje pitanje, koliko zamena? A treba da napišemo... ...kod monitora. Ako želimo monitor da implementiramo pomoću semafora. Uff, pitanje. Nezgodno. Ali možde nije neskoda, možde jednostavno. Šta od... ...kod monitora mi radimo? Ulazimo u monitor, izlazimo iz monitora, odnosno monitorski metode. A i namo obajt na monitor i u mu signal na monitorom. Tako da mi u suštini treba da pokrijamo te na uslovnom promenju, znači signal and weight na uslovnom promenju, ulazak i zlazak iz monitora. I to su ta četiri slučaje, to su te četiri karakteristične situacije, koje treba da budu pokrivene kod monitora. Koji imaju disciplinu signal and weight? Kod discipline koji ima... ...kod monitora koji ima disciplinu signal and weight. Postoji jedna peta situacija, a to je jedna metoda, koji ste videli u javi, koji smo malo što su suštini videli kod... ...regiona, to ono signal all, odnosno notify all. Ona postoji tam metoda, postoji samo kod monitora, koji imaju disciplinu signal and weight. Ne postoji kod monitora koji imaju disciplinu signal and weight. Ta kaže, svi zablokirani na uslom, na redu uslomnih... ...na uslomnom redu, da te promenjive idu u entriki, ulazni red. Svi oni se prebacuju. Pa zašto onda to ne postoji koji discipline signal and... ...continuju? Signal and weight, pa zato što ne mogu se vi oni da budu prvi naredni. Može bi ti samo jedan prvo na prvi naredni. Oni ovi ostali će doći nekad na red. E, pošto će oni nekad doći na red, to više njiha ono što smo imali. Da se garantuje, da se ništa neće promeniti od ovog trenutka do onog tamo trenutka. Ako se više ništa ne garantuje, onda to nije monitor sa disciplinom signal and... ...and weight, tako da se to ne pravi. Dobro, znači, što smo reke kod monitora sa disciplinom signal and weight. Mi treba da implementiramo četri karakteristicne situacije, ulazaku monitor, izlazak iz monitora, čekajno uslomnih promenjivo i signalizirajno uslomnih promenjivi. A do kod monitora koji ima disciplinu signal and continu, i imamo ulazaku monitor, izlazak iz monitora, čekajno uslomnih promenjivo, obaveštavanje na uslomnih promenjivo i obaveštavanje svih na datoj uslomnoj promenji. I mi sada želimo to da napravimo koristitji jedan, odnosno neki skup semofor. Svaj dvijepitanje samo, koko puta mi možemo duđimo u monitor? To će biti jedan dodatak, okome vi takođemo šte razmisliti našto. Šta smo reklji, prajimo situaciju po situaciju. Kako može da se realizuje ulazak u monitor? Vrlo jednostavno može da se realizuje ulazak u monitor, a kažemo weight mutex. Kraj, nema ništa više. Znači jedino što mi treba dorodim, odnosno proglamski prevodilac. Kad treba da creira neku monitoru sku metodu, prvi red, te metode će biti weight mutex. Vrlo jednostavno rešenje. Dobro, šta ćemo meti kao poslednji red na toj uslovnoj premenji? Verovatno, kad napuštamo monitor bi mi trebali da kažemo signal mutex. Znači weight mutex, signal mutex, ništa više. A, u slučaju da imamo monitor sa disciplinom signal on weight. To je jedino što mi treba dorodimo. Weight mutex, signal mutex. Ali mi neprajemo sada monitor sa disciplinom signal on weight, pravimo monitor sa disciplinom signal on urgent weight. Pa, razlikam. Pa, dobro, koja on razlika? Ako postoje neko u urgentnom redu. Vi ćemo probuditi tog nekog iz urgentnog reda. Ako ne postoje nikog u urgentnom redu, onda ćemo probuditi nekog iz ulaznog reda. Znači, vidite, vrlo jednostavno rešenje. Šta to rešenje radi? Pa, li kaže ako neko čeka? O doniku treba da se probude. Budi nekog. Znači, taj neko je u urgentnom redu. A ako nikog, u ovom signalom na next. Ali ako tu nikog nečeka, a ovdje imamo signal mutex. To je nekog koji kaže, smež duđiš monitor, ne smež duđiš monitor. To je semfer koja nam garantuje, među sobno isključivaj. Imamo još dve karakteristične situacije, koje treba napisati, čekaj na uslovnoj promenjivoj i signaliziraj na uslovnoj promenjivoj. Šta smo rekli da radi weight nad uslovnoj promenjivoj? Kaježe, ja se bezuslovno blokiram. Bezuslovno se blokiram dobro. Ako moram da kažem, sada ja sam zablokiram. Znači, ovdje uslovno promenjiva, tačka count, kaže u većej broj, u onih koji čekaju na datu uslovnoj promenjivoj, za jedan. A koga ja sa treba da probudim? Ja, koji se blokiram? Koga je da pustim? Pustam. Ili, nekog koj čeka u redu, u ulaznom redu, ili pustam onog koja me ne probudio. Čvijek, isti posao koji radimo ovdje, kada napuštamo monitor, mi ustvario, radimo jo ovdje. Bukvamo identično parče koda se ovdje smešta. Šta radimo u tom parčetu koda? Treba nekog da pustimo da uđe u monitor. Koga pustamo? If nek'a tačka count već je od nola, to znači, pusta je onog što je tebe probudio. Ako je to jednako nulo, nikom je nije probudio, ja sam se sam zablokirav, i ja puštam nekog novog da uđe u monitor. Šta radimo onda? Kajžem, weight na cv.semafora. Čekam na nekom svom semaforu. Jeste. Dobro. Šta smo mi do sada ovde od promenljivih? Morali da nakazimo. Jemu jednu promenljivu mutex, imamo jednu promenljivu koja se zove count, ali ajde bi sto razvikovali, imaćemo next.count i imamo next.semafor. Ova dva su vezana, jedan, bez drugog nejtu. To su 1 mutex za cel monitor, jedan semafor next i jedan count next za čita monitor i, a sada, ove dodatak je za svaku uloznu promenljivu. Mi ćemo imati conditional variable tačka count, jedna promenljiva i conditional variable sa obični ve tačka semafor. Znači vidite, za svaku uslovnu promenljivu ćemo mi morati da stajemo dve stvari. Jedno je broj o njih koji su zablokirani, zato što naši semafor i nemaju baš ovo mogućnost te da mi ko ko veliki taj red i druga stvar koji mi imamo je sam semafor. Znači imamo semafor i brojač. Dobro. A kad nas neko probudi šta smo mi odradili, kad nas neko probudi, pa smanjićemo promenljivu koja kaže ko kojima zablokirani. Koji u tehniku ovde primenjujemo? Tekniku koji ste videli na dosadašnjem delu kursa to su raspodeljeni binarni semafor i tehnika predaš tafetne palice. Ovo je ovde način implementacije i direktna primena tehnike predaš tafetne palice i korišćini raspodeljenih binarnih semafora. Naši semafori, Next, NewTex i CV semafor su svi jedan veliki svi jedan veliki semafor. To su raspodeljeni binarnih semaforiinvestite pristup do jednog te istog objekta. Svi oni stite pristup do jednog jedinog objekta ovog našeg monitora koji pišemo. Dobro. Šta radi naša signal metoda? To nam je ostalo da napišemo. Signal metoda treba da probeli. Dali postoji neko zablokirano? A ako nema nikog zablokiranog, kraj. Ja sam završio posao, nikon nečekam. Nije kao semafora uveće neku internetnu promenju u zeda, nema toga ovte. A ako nikon nečekam, ja sam završio posao. Dobro. A ako neko čeka, šta onda?